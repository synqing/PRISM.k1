# R3.1 Color-space Decision (OKLab/OKLCH vs HSLuv vs HSV/HSL)

Owner: Agent 3
Date: TODO

## Problem
Choose palette space for authoring smooth ramps with minimal banding/hue drift on 160 LEDs, with acceptable performance and simple library support.

## Success Criteria
- Perceptual uniformity in ramps (reduced banding vs HSV/HSL)
- Stable hue and saturation across blends
- Python library availability and performance acceptable for offline tooling
- Clear migration path from current HSV usage

## Options
- OKLab/OKLCH (perceptual)
- HSLuv (human-friendly HSL)
- HSV/HSL (status quo, baseline only)

## Evaluation Plan
- Test 2-/3-stop ramps across warm/cool/pastel palettes
- Metrics: visual inspection (banding), ΔE proxies, ramp smoothness
- Libraries: hsluv, kolor (oklab) or equivalent

## Decision
Adopt HSLuv as the initial default ramp space for palette authoring, with an explicit extension point to add OKLab/OKLCH next. HSLuv materially reduces banding vs HSV/HSL, has a stable and lightweight Python implementation, and is good enough for v1 authoring. OKLab/OKLCH offers better perceptual properties; we will add it as an optional `--space oklab/oklch` once we validate the library surface and cement preview/packaging constraints.

## Recommended Action
- Implement `--space hsluv` in `tools/palette_to_prism.py` now (default to hsluv). Keep `hsv` and `hsl` available.
- Architect interpolation to allow pluggable spaces; add `--space oklab/oklch` in a follow‑up.
- Document guidance and examples for common ramps (warm/cool/pastel), and when to prefer OKLab.

## Evidence & References
- Attach plots; cite OKLab/OKLCH docs, HSLuv docs.
