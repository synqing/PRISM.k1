# R3.4 Packaging Trade-offs for .prism Sequences

Owner: Agent 3 (with input from Agent 1)
Date: TODO

## Problem
Choose encoding(s) for multi-frame sequences balancing size and decode speed at 120 FPS on ESP32-S3.

## Candidates
- Palette + indices
- Delta encoding across frames
- RLE variants / hybrid approaches

## Inputs
- R1.1 decode budget (cycles/memory)
- Typical sequence: 16s @120 FPS, 160 LEDs

## Decision
Use palette+indices as the primary encoding with optional per-frame delta-of-indices and lightweight RLE. Constraints: global or segment palette (≤64 colors), 8-bit indices, single-pass decode (index→RGB) with optional XOR delta application. This yields ~3× size reduction vs raw RGB (160B vs 480B per frame before palette updates) and trivial O(N) decode.

## Recommended Action
- Implement palette+indices with optional per-frame XOR delta and simple RLE for runs; enforce palette size and single-pass decode constraint. Verify against R1.1 budget.

## Evidence
- Size vs decode cost tables; microbench results
